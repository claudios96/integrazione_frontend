<div>
    <div class="row">
        <div class="col-lg-12" align="center">
            <h1 ng-show="ctrl.type == 'prodotto'" class="page-header">Chat prodotto {{ctrl.id}}</h1>
            <h1 ng-show="ctrl.type == 'leader-member'" class="page-header">Chat leader-member ticket {{ctrl.id}}</h1>
            <h1 ng-show="ctrl.type == 'team'" class="page-header">Chat team {{ctrl.id}}</h1>
        </div>
        <!-- /.col-lg-12 -->

    </div>



    <ul>
        <table ng-repeat="message in ctrl.messages" width="100%" style="padding-top: 2%">
            <tr>

                <td>

                    <table ng-if="message.username == ctrl.userInfo.username" width="100%">
                        <tr>
                            <td class="colonna">{{message.completeName}}</td>
                        </tr>

                        <tr>
                            <td class="colonna">{{ message.timestamp | date:"MM/dd/yyyy 'ore' h:mma" }} </td>
                        </tr>

                        <tr>
                            <td class="messaggio_out">
                                {{ message.text }}

                                <button ng-if="message.type == 'SNIPPET'" type="submit" class="btn_snippet" ng-click="showDialogSnippetDetail(message.text)" style="vertical-align: center;">Snippet</button>


                            </td>
                        </tr>

                        <tr><td height="20px"></td></tr>
                    </table>

                    <table ng-if="message.username != ctrl.userInfo.username" width="100%">

                        <tr>
                            <td>{{message.completeName}}</td>
                        </tr>

                        <tr>
                            <td>{{ message.timestamp | date:"MM/dd/yyyy 'ore' h:mma" }} </td>
                        </tr>

                        <!-- se messaggio di notifica , mostro bottone dettaglio ticket-->
                        <tr>
                            <td class="messaggio_in">
                                {{ message.text }}
                                <button ng-if="message.username == 'System'" type="submit" class="btn_ticketDetail" ng-click="ctrl.showTicketDetail(message.text)" style="vertical-align: center;">Visualizza dettaglio</button>

                                <!-- ng-if="message.type == 'SNIPPET'" -->
                                <button  type="submit" class="btn_snippet" ng-click="showDialogSnippetDetail(message.text)" style="vertical-align: center;">Snippet</button>



                            </td>
                        </tr>

                        <tr><td height="20px"></td></tr>
                    </table>


                </td>


            </tr>
        </table>
    </ul>


    <div class="col-lg-12" align="center" ng-controller="ChatCtrl" style="padding-bottom: 10%">
        <form>
            <input ng-model="ctrl.messageContent" type="text" style="width:90%; height:50px" placeholder="Scrivi un messaggio..."/>

            <!--<textarea ng-model="ctrl.messageContent" style="width:90%; height:150px" placeholder="Scrivi un messaggio..." autofocus></textarea>-->

            <button type="submit" class="btn btn-primary" ng-click="ctrl.sendMessage()" style="vertical-align: center;">Invia</button>

            <button ng-click="showDialogInsertSnippet()" class="btn btn-primary btn-chat">Invia Snippet</button>

            <input type="file"
                   custom-on-change="selectedFile"/>
            <!--<button  class="btn btn-primary btn-lg btn-block" ng-click="ctrl.uploadFile()">Upload</button>-->

        </form>
    </div>
</div>
